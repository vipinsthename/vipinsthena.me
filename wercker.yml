box: wercker/nodejs
no-response-timeout: 10

build:
  steps:
    - npm-install
    - grunt:
        tasks: generate

deploy:
    steps:
        - script:
            name: install hexo globally
            code: |
                sudo npm install -g hexo
        - s3sync:
            key_id: $AWS_ACCESS_KEY_ID
            key_secret: $AWS_SECRET_ACCESS_KEY
            bucket_url: $AWS_BUCKET_URL
            source_dir: public/
